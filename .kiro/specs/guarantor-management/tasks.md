# תכנית יישום - מערכת ניהול ערבים

## משימות יישום

- [x] 1. הכנת תשתית מסד הנתונים




  - יצירת ממשקי TypeScript לערבים, רשימה שחורה ומכתבי התראה
  - הוספת טבלאות חדשות למסד הנתונים הקיים
  - יצירת פונקציות CRUD בסיסיות לערבים
  - _דרישות: 1.1, 1.2, 1.3, 1.4, 1.5_




- [-] 2. יצירת דף ניהול ערבים ראשי


  - [x] 2.1 יצירת GuarantorsPage.tsx עם טבלת ערבים



    - הצגת רשימת כל הערבים עם פרטים בסיסיים
    - כפתורי הוספה, עריכה ומחיקה
    - חיפוש וסינון ערבים לפי שם, טלפון או ת.ז
    - _דרישות: 6.1, 6.2, 6.3, 6.4_



  - [-] 2.2 יצירת GuarantorForm.tsx לטופס הוספה/עריכה

    - שדות חובה: שם מלא, טלפון
    - שדות אופציונליים: ת.ז, כתובת, אימייל, הערות
    - ולידציות לכל השדות

    - _דרישות: 1.1, 1.2, 1.4_

  - [ ] 2.3 הוספת ניווט לטאב ערבים בתפריט הראשי
    - עדכון App.tsx עם נתיב חדש
    - הוספת קישור בדף הבית
    - _דרישות: 6.1_

- [ ] 3. אינטגרציה עם מערכת ההלוואות
  - [ ] 3.1 יצירת GuarantorSelector.tsx לבחירת ערב
    - רשימה נפתחת של ערבים פעילים בלבד
    - הצגת פרטי הערב הנבחר
    - מניעת בחירת ערבים חסומים
    - _דרישות: 2.1, 2.2, 2.3_

  - [ ] 3.2 עדכון LoansPage.tsx לשימוש בערבים רשומים
    - החלפת שדות טקסט חופשי ברכיב GuarantorSelector
    - שמירת ID ערב במקום שם בלבד




    - תמיכה לאחור בהלוואות קיימות
    - _דרישות: 2.1, 2.4_

  - [ ] 3.3 עדכון מעקב ערבויות פעילות
    - חישוב אוטומטי של מספר ערבויות לכל ערב
    - עדכון בעת יצירה וסגירה של הלוואות


    - הצגת סיכון כולל בש"ח
    - _דרישות: 2.4, 2.5, 5.3_

- [ ] 4. מערכת רשימה שחורה
  - [ ] 4.1 יצירת BlacklistManager.tsx לניהול חסימות
    - הוספת לווה או ערב לרשימה שחורה
    - הסרה מהרשימה עם סיבה
    - הצגת היסטוריית חסימות
    - _דרישות: 3.1, 3.4, 3.5_

  - [ ] 4.2 אינטגרציה עם מערכת ההלוואות
    - בדיקה אוטומטית בעת יצירת הלוואה
    - הצגת אזהרות לערבים ולווים חסומים
    - מניעת יצירת הלוואה ללווה חסום
    - _דרישות: 3.2, 3.3_

  - [ ] 4.3 הוספת אינדיקטורים ויזואליים


    - סימון ערבים חסומים בטבלה
    - צבעים שונים לסטטוסים שונים
    - אייקונים להבחנה מהירה
    - _דרישות: 6.5_

- [ ] 5. מכתבי התראה
  - [ ] 5.1 יצירת WarningLetterGenerator.tsx
    - תבניות מכתבים ללווים ולערבים
    - יצירה דינמית של תוכן המכתב
    - אפשרויות הדפסה ושמירה
    - _דרישות: 4.1, 4.2, 4.3, 4.4_

  - [ ] 5.2 יצירת WarningLettersPage.tsx לניהול מכתבים
    - רשימת כל המכתבים שנשלחו
    - סינון לפי הלוואה, לווה או ערב
    - מעקב אחר תאריכי שליחה
    - _דרישות: 4.5_

  - [ ] 5.3 אינטגרציה עם דף ההלוואות
    - כפתור יצירת מכתב התראה בדף הלוואה
    - בחירת סוג המכתב (לווה/ערב/משותף)
    - שמירת תיעוד השליחה
    - _דרישות: 4.1, 4.2, 4.3_

- [ ] 6. דוחות ומעקב
  - [ ] 6.1 הוספת דוחות ערבים לדף הסטטיסטיקות
    - דוח ערבים לפי מספר ערבויות
    - דוח ערבים עם סיכון גבוה
    - דוח ערבויות שפג תוקפן
    - _דרישות: 5.1, 5.2, 5.4_

  - [ ] 6.2 יצירת GuarantorDetailsPage.tsx לפרטי ערב
    - הצגת כל פרטי הערב
    - רשימת כל הערבויות (פעילות וסגורות)
    - היסטוריית פעילות וחסימות
    - _דרישות: 2.5, 5.1_

  - [ ]* 6.3 ייצוא דוחות לקבצים חיצוניים
    - ייצוא לExcel של רשימת ערבים
    - ייצוא לPDF של דוחות סיכונים
    - שמירת דוחות מותאמים אישית
    - _דרישות: 5.5_

- [ ] 7. מיגרציה והתאמות
  - [ ] 7.1 מיגרציה של נתונים קיימים
    - המרת שמות ערבים קיימים לרשומות ערבים
    - יצירת ערבים חדשים מההלוואות הקיימות
    - שמירת תאימות לאחור
    - _דרישות: 2.4_

  - [ ] 7.2 עדכון הגדרות מערכת
    - הוספת הגדרות חדשות לערבים
    - בקרה על חובת מספר זהות לערבים
    - הגדרות התראות וסיכונים
    - _דרישות: 1.3_

  - [ ] 7.3 שיפורי ביצועים ואופטימיזציה
    - אינדקסים לחיפוש מהיר
    - קאשינג של נתונים נפוצים
    - אופטימיזציה של שאילתות מורכבות
    - _דרישות: כלליות_

- [ ]* 8. בדיקות ותיעוד
  - [ ]* 8.1 כתיבת בדיקות יחידה לפונקציות ערבים
    - בדיקות CRUD לערבים
    - בדיקות ולידציה ורשימה שחורה
    - בדיקות חישוב סיכונים
    - _דרישות: כלליות_

  - [ ]* 8.2 בדיקות אינטגרציה עם מערכת ההלוואות
    - בדיקת זרימה מלאה של יצירת הלוואה עם ערב
    - בדיקת מניעת הלוואה לחסומים
    - בדיקת עדכון אוטומטי של ערבויות
    - _דרישות: כלליות_

  - [ ]* 8.3 תיעוד למשתמש ומפתח
    - מדריך למשתמש לניהול ערבים
    - תיעוד טכני למפתחים
    - דוגמאות שימוש ומקרי קצה
    - _דרישות: כלליות_