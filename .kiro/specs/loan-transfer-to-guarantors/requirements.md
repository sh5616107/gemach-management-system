# דרישות מערכת העברת הלוואות לערבים

## מבוא

מערכת העברת הלוואות לערבים נועדה לטפל במצבים בהם לווה לא פרע את ההלוואה במועד. המערכת תאפשר למנהל הגמ"ח להעביר את האחריות לתשלום לערבים, לחלק את הסכום ביניהם, ולעקוב אחר סטטוס ההלוואות שהועברו. כמו כן, המערכת תנהל אוטומטית את הרשימה השחורה של לווים וערבים שלא עמדו בהתחייבויותיהם.

## מילון מונחים

- **Loan_Transfer_System**: מערכת העברת ההלוואות לערבים
- **Overdue_Loan**: הלוואה שעבר מועד הפירעון שלה
- **Transferred_Loan**: הלוואה שהועברה לתשלום הערבים
- **Guarantor_Debt**: חוב שנוצר לערב כתוצאה מהעברת הלוואה
- **Payment_Split**: חלוקת סכום ההלוואה בין הערבים
- **Overdue_Loans_Page**: דף ריכוז ההלוואות שפג תוקפן
- **Blacklist_System**: מערכת הרשימה השחורה
- **Original_Borrower**: הלווה המקורי שלא פרע את ההלוואה
- **Guarantor_Payment_Plan**: תוכנית תשלומים לערב

## דרישות

### דרישה 1: דף ריכוז הלוואות שפג תוקפן

**User Story:** כמנהל גמ"ח, אני רוצה לראות בדף אחד את כל ההלוואות שעבר מועד הפירעון שלהן, כדי שאוכל לנהל בצורה מרוכזת את תהליך העברתן לערבים.

#### קריטריוני קבלה

1. THE Overdue_Loans_Page SHALL להיות נגיש דרך תפריט "כלים מתקדמים"
2. WHEN נכנסים לדף, THE Overdue_Loans_Page SHALL להציג רשימה של כל ההלוואות שמועד הפירעון שלהן עבר
3. THE Overdue_Loans_Page SHALL להציג לכל הלוואה את שם הלווה, סכום ההלוואה, תאריך פירעון, וימי איחור
4. THE Overdue_Loans_Page SHALL להציג את שמות הערבים לכל הלוואה
5. THE Overdue_Loans_Page SHALL לעקוב אחר העיצוב הכללי של האתר עם באנר, כפתורי חזרה, וטפסים מתאימים

### דרישה 2: העברת הלוואה לערבים

**User Story:** כמנהל גמ"ח, אני רוצה להעביר הלוואה שלא נפרעה לאחריות הערבים, כדי לגבות את החוב מהערבים במקום מהלווה המקורי.

#### קריטריוני קבלה

1. WHEN בוחרים הלוואה בדף ההלוואות שפג תוקפן, THE Loan_Transfer_System SHALL להציג כפתור "העבר לערבים"
2. WHEN לוחצים על "העבר לערבים", THE Loan_Transfer_System SHALL להציג חלון דיאלוג עם אפשרויות העברה
3. THE Loan_Transfer_System SHALL להציג את רשימת הערבים של ההלוואה
4. THE Loan_Transfer_System SHALL לאפשר בחירה האם לחייב ערב אחד או את כל הערבים
5. WHERE בוחרים ערב אחד, THE Loan_Transfer_System SHALL לאפשר בחירת הערב מהרשימה

### דרישה 3: חלוקת סכום ההלוואה בין ערבים

**User Story:** כמנהל גמ"ח, אני רוצה לחלק את סכום ההלוואה בין מספר ערבים, כדי לפזר את הסיכון ולהקל על כל ערב בנפרד.

#### קריטריוני קבלה

1. WHERE בוחרים לחייב את כל הערבים, THE Payment_Split SHALL לחלק את הסכום שווה בשווה בין כל הערבים
2. THE Payment_Split SHALL להציג את הסכום שיחויב כל ערב לפני אישור ההעברה
3. THE Payment_Split SHALL לעגל סכומים לאגורה הקרובה
4. WHERE הסכום לא מתחלק שווה בשווה, THE Payment_Split SHALL להוסיף את ההפרש לערב הראשון
5. THE Loan_Transfer_System SHALL לאפשר עריכה ידנית של חלוקת הסכומים בין הערבים

### דרישה 4: קביעת תנאי תשלום לערבים

**User Story:** כמנהל גמ"ח, אני רוצה לקבוע האם הערב ישלם את החוב בתשלום אחד או בתשלומים, כדי להתאים את תנאי התשלום ליכולת הערב.

#### קריטריוני קבלה

1. WHEN מעבירים הלוואה לערב, THE Guarantor_Payment_Plan SHALL לאפשר בחירה בין "תשלום אחד" ו"תשלומים"
2. WHERE בוחרים "תשלומים", THE Guarantor_Payment_Plan SHALL לאפשר הגדרת מספר תשלומים וסכום כל תשלום
3. WHERE בוחרים "תשלומים", THE Guarantor_Payment_Plan SHALL לאפשר הגדרת תאריכי פירעון לכל תשלום
4. THE Guarantor_Payment_Plan SHALL לשמור את תוכנית התשלומים כחלק מרשומת החוב של הערב
5. THE Guarantor_Payment_Plan SHALL להציג את תוכנית התשלומים בדף ההלוואות של הערב

### דרישה 5: סימון הלוואה מועברת בדף הלווה

**User Story:** כמנהל גמ"ח, אני רוצה לראות בדף ההלוואות של הלווה המקורי שההלוואה הועברה לערבים, כדי לדעת שהחוב כבר לא באחריותו אבל עדיין לא נפרע.

#### קריטריוני קבלה

1. WHEN הלוואה מועברת לערבים, THE Loan_Transfer_System SHALL לסמן את ההלוואה כ"הועברה לערבים"
2. THE Loan_Transfer_System SHALL לא לסמן את ההלוואה כ"נפרעה"
3. THE Loan_Transfer_System SHALL להציג בדף ההלוואות של הלווה סטטוס "הועברה לערבים" בצבע מובחן
4. WHEN לוחצים על הלוואה מועברת, THE Loan_Transfer_System SHALL להציג את פרטי ההעברה והערבים שחויבו
5. THE Loan_Transfer_System SHALL לשמור את תאריך ההעברה ואת שם המשתמש שביצע את ההעברה

### דרישה 6: יצירת חוב חדש לערב

**User Story:** כמנהל גמ"ח, אני רוצה שכאשר הלוואה מועברת לערב, ייווצר לו חוב חדש במערכת, כדי שאוכל לעקוב אחר תשלומיו ולנהל את החוב שלו.

#### קריטריוני קבלה

1. WHEN הלוואה מועברת לערב, THE Loan_Transfer_System SHALL ליצור רשומת חוב חדשה לערב
2. THE Guarantor_Debt SHALL לכלול קישור להלוואה המקורית
3. THE Guarantor_Debt SHALL לכלול את שם הלווה המקורי
4. THE Guarantor_Debt SHALL לכלול את הסכום שהערב חייב
5. THE Guarantor_Debt SHALL להיות מוצג בדף הלוואות נפרד לערבים או בסימון מיוחד

### דרישה 7: הוספה אוטומטית לרשימה השחורה - לווה

**User Story:** כמנהל גמ"ח, אני רוצה שלווה שלא פרע והלוואתו הועברה לערבים ייכנס אוטומטית לרשימה השחורה, כדי למנוע ממנו לקבל הלוואות נוספות.

#### קריטריוני קבלה

1. WHEN הלוואה מועברת לערבים, THE Blacklist_System SHALL להוסיף את הלווה המקורי לרשימה השחורה של לווים
2. THE Blacklist_System SHALL לרשום את הסיבה כ"לא פרע הלוואה - הועבר לערבים"
3. THE Blacklist_System SHALL לרשום את תאריך ההוספה לרשימה השחורה
4. THE Blacklist_System SHALL לקשר את רשומת הרשימה השחורה להלוואה המקורית
5. WHEN מנסים ליצור הלוואה חדשה ללווה חסום, THE Blacklist_System SHALL להציג הודעה עם הסיבה לחסימה

### דרישה 8: הוספה אוטומטית לרשימה השחורה - ערב

**User Story:** כמנהל גמ"ח, אני רוצה שערב שלא פרע את החוב שהועבר אליו ייכנס אוטומטית לרשימה השחורה, כדי למנוע ממנו לשמש כערב בהלוואות נוספות.

#### קריטריוני קבלה

1. WHEN ערב לא משלם את החוב שהועבר אליו עד מועד הפירעון, THE Blacklist_System SHALL להוסיף את הערב לרשימה השחורה של ערבים
2. THE Blacklist_System SHALL לרשום את הסיבה כ"לא פרע חוב כערב"
3. THE Blacklist_System SHALL לרשום את תאריך ההוספה לרשימה השחורה
4. THE Blacklist_System SHALL לקשר את רשומת הרשימה השחורה לחוב הערב
5. WHEN מנסים לבחור ערב חסום להלוואה חדשה, THE Blacklist_System SHALL להציג הודעה עם הסיבה לחסימה

### דרישה 9: מעקב ודיווח על הלוואות מועברות

**User Story:** כמנהל גמ"ח, אני רוצה לקבל דוחות על הלוואות שהועברו לערבים ועל סטטוס התשלומים, כדי לעקוב אחר ההחזרים ולנהל את התהליך ביעילות.

#### קריטריוני קבלה

1. THE Loan_Transfer_System SHALL להציג דוח של כל ההלוואות שהועברו לערבים
2. THE Loan_Transfer_System SHALL להציג לכל הלוואה מועברת את הלווה המקורי, הערבים, והסכומים
3. THE Loan_Transfer_System SHALL להציג את סטטוס התשלום של כל ערב (שולם/לא שולם/תשלום חלקי)
4. THE Loan_Transfer_System SHALL לחשב סך כל הסכומים שהועברו לערבים
5. THE Loan_Transfer_System SHALL לאפשר סינון לפי סטטוס תשלום, תאריך העברה, או שם ערב

### דרישה 10: אישור והתראות

**User Story:** כמנהל גמ"ח, אני רוצה לקבל אישור לפני העברת הלוואה לערבים, כדי למנוע טעויות ולוודא שאני מבצע את הפעולה במודע.

#### קריטריוני קבלה

1. WHEN לוחצים על "אשר העברה", THE Loan_Transfer_System SHALL להציג חלון אישור עם סיכום הפעולה
2. THE Loan_Transfer_System SHALL להציג בחלון האישור את שם הלווה, סכום ההלוואה, והערבים שיחויבו
3. THE Loan_Transfer_System SHALL להציג בחלון האישור את חלוקת הסכומים בין הערבים
4. THE Loan_Transfer_System SHALL לדרוש אישור סופי לפני ביצוע ההעברה
5. WHEN ההעברה מושלמת, THE Loan_Transfer_System SHALL להציג הודעת הצלחה עם פרטי ההעברה
